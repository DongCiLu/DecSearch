\section{Introduction}
\label{introduction}

Various types of graphs are commonly used as models for real-world phenomenon, such as online social networks, biological networks, the world wide web, among others~\cite{newman2010networks}. As their sizes keep increasing, scaling up algorithms to handle extreme size graphs with billions of edges remains a challenge that has drawn increased attention in recent years. Specifically, straightforward graph algorithms are usually too slow or costly when they are applied to graphs at this scale. One problem is finding shortest paths in the network, an operation that serves as the building block for many other tasks. For example, a natural application for road network is providing driving directions~\cite{Abraham:2011:HLA:2008623.2008645}. In social networks, such applications include social sensitive search~\cite{Vieira:2007:ESR:1321440.1321520}, analyzing influential people~\cite{Kempe:2003:MSI:956750.956769}. Estimating minimum round trip time between hosts without direct measurement is another application in technology networks~\cite{Tang:2003:VLI:948205.948223}.

Although previous works have studied the shortest path problem on large road networks extensively. A large category of networks known as the complex networks has very different structures, i.e. following power law degree distributions, exhibiting small diameters, etc., and has received less attentions. Approaches for road networks do not perform well on complex networks. In this paper, we focus on the shortest path problem for complex networks in particular, as their extreme sizes and unique topologies make the problem particularly challenging.

Our design is motivated by recent studies that combine both offline processing and online queries~\cite{Potamias:2009:FSP:1645953.1646063, tretyakov2011fast, Akiba:2012:SQC:2247596.2247614, 6399472, Jin:2012:HLA:2213836.2213887}. In these methods, the step of preprocessing aims to construct indexes for the networks, which are later used in the online query phase to dramatically reduce the query time. Among these approaches, landmark based algorithms are widely used to approximate shortest path/distance between vertices~\cite{Thorup:2005:ADO:1044731.1044732, Goldberg:2005:CSP:1070432.1070455, Potamias:2009:FSP:1645953.1646063, Gubichev:2010:FAE:1871437.1871503, tretyakov2011fast, 6399472}. Such algorithms select a small set of landmarks, and construct an index that consists of labels for each vertex, which store distances or shortest paths to landmarks. The approximation accuracy of landmark based algorithms heavily depends on the number of landmarks. To achieve high accuracy, a relatively large set of landmarks is required, which leads to large preprocessing overhead. Indexes that can answer path queries usually have much larger space overhead than indexes that can only answer distance queries. One goal of our design, therefore, is to provide accurate results while still maintain low overhead for indexing.

Previous works on applying online search to indexed graph limit the search space to sub-graphs constructed by vertices in labels of source and target vertices~\cite{Gubichev:2010:FAE:1871437.1871503, 6399472}. The accuracy and diversity of approximated path are constrained this way, e.g., only short-cut edges directly connecting vertices in labels can be found. To overcome this problem, we propose to perform a heuristic search on the indexed graph that is guided by locally collected information from labels of nearby vertices. The advantage is that the search can expand the search space into edges that have not been indexed to achieve higher accuracy and diversity of approximated path with limited index size. The heuristic search that we use is called decentralized search which was introduced in~\cite{Kleinberg:2000p5066, kleinberg2006complex}. Here the ``decentralized'' means that the decision of the search is made based solely on local information which, in our context, is the labels of neighbor vertices at each step of the search.

Decentralized search is very light-weighted. The number of visited vertices for decentralized search is bounded by the diameter of the network. Considering that complex networks usually have relatively short diameters, decentralized search can finish in a limited number of steps. The search can also adjust its search space to balance between different levels of performance and required resources for each search. This makes the search very versatile to meet various application needs.  

The performance of decentralized search relies heavily on the index. Landmark selecting problem has been well studied in ~\cite{Potamias:2009:FSP:1645953.1646063,6927522}. We observe that even with the same landmark set, choosing which shortest path from vertex to landmark to be indexed also plays an important role for the accuracy of online search. To achieve better accuracy without increasing index overhead, we introduce a heuristic index construction algorithm to control shortest paths to be indexed during preprocessing. The proposed approach outperforms random shortest path indexing by a large margin on real networks.

Based on our algorithm design, we further develop a query-processing system based on distributed cloud infrastructure to support large scale graph with billions of edges. In this platform, users first submit their graphs for preprocessing needs. The graph processing engine will assign resources according to application's need for accuracy and construct an index for the input graph. Later, users may submit large volumes of queries repeatedly, for which responses will be generated. Applications that generate queries (on the client side) can provide their desired accuracy levels and the graph processing engine can dynamically adjust search space of decentralized search to meet differentiated levels of accuracies.

The light-weighted decentralized search allows a large number of queries to run in parallel so that the system can achieve high query processing throughput. There are two properties of decentralized search that makes it very suitable for parallel processing. First, decentralized search has small space complexity and communication complexity. As the search does not need to store any information on per-vertex basis like BFS or A* search, very limited space overhead is required for each search. Second, decentralized searches only have read after read data dependencies on the index and underlying graph. Multiple searches can run independently on the same graph and index. These two properties make it possible for a large number of searches running in parallel efficiently without reaching the physical limit of machines, i.e., memory size or network bandwidth. For example, in our experiments, we show that millions of decentralized search can run in parallel on graphs with billions of edges on a cluster of commodity machines, and finish in tens of seconds. 

\subsection{Contributions}
Our contributions can be summarized as follows:

\begin{itemize}
	\item We propose index guided decentralized search for shortest path approximation;
	\item We design a heuristic index construction algorithm to improve online search accuracy without increasing index overheads;
	\item We achieve efficient query processing and good scalability with distributed implementation and parallel processing;
	\item Experiments on various real world complex networks demonstrate that the proposed algorithm is promising in approximating shortest path compared to existing works.
\end{itemize}

The rest of this paper is organized as follows. In Section~\ref{relatedwork} we show previous works on exact and approximate approaches. Section~\ref{preliminary} provides notations and definitions used in this paper. We explain index guided decentralized search for shortest path approximation in Section~\ref{searching}. Section~\ref{preprocessing} discusses index construction algorithm. In Section~\ref{implementation} we show details on our distributed implementation. The evaluations of our algorithm is in Section~\ref{evaluation}. We conclude our work in Section~\ref{conclusion}.
